{% extends 'base.html' %}
{% block title %}Acompanhamento — IMC{% endblock %}
{% block content %}
<section class="card">
  <h1>Acompanhamento</h1>
  <p>Veja os registros na forma de tabela e verifique o alcance da meta.</p>
  <table class="table">
    <thead>
      <tr>
        <th>Data</th>
        <th>Peso (kg)</th>
        <th>IMC</th>
        <th>Classificação</th>
        <th>Dentro da meta?</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      {% if registros and registros|length > 0 %}
        {% for r in registros %}
        <tr{% if r.ok is defined %} class="{{ 'row-ok' if r.ok else 'row-bad' }}"{% endif %}>
          <td>{{ r.data.strftime('%d-%m-%Y') }}</td>
          <td>{{ r.peso }}</td>
          <td>{{ r.imc }}</td>
          <td>{{ r.classificacao }}{% if r.grau is defined and r.grau %} {{ r.grau }}{% endif %}</td>
          <td>
            {% if r.ok is defined %}
              {{ 'Sim' if r.ok else 'Não' }}
            {% else %}
              —
            {% endif %}
          </td>
          <td>
            <form method="post" action="{{ url_for('remover_registro') }}" style="display:inline;">
              <input type="hidden" name="registro_id" value="{{ r.id if r.id is defined else '' }}" />
              <button type="submit" class="button secondary">Remover</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      {% else %}
      <tr>
        <td colspan="6">Sem registros no momento.</td>
      </tr>
      {% endif %}
    </tbody>
  </table>
</section>
{% endblock %}