{% extends 'base.html' %}
{% block title %}Propriedades — Propriedades Rurais{% endblock %}
{% block content %}
<section class="card">
  <h1>Cadastrar Propriedade</h1>
  <form class="form" method="post">
    <div class="form-row">
      <label for="nome">Nome da propriedade</label>
      <input type="text" id="nome" name="nome" required />
    </div>
    <div class="form-row">
      <label for="municipio">Município</label>
      <input type="text" id="municipio" name="municipio" required />
    </div>
    <div class="form-row">
      <label for="estado">Estado</label>
      <input type="text" id="estado" name="estado" maxlength="2" required />
    </div>
    <div class="form-row">
      <label for="area_total">Área total (ha)</label>
      <input type="number" step="0.01" id="area_total" name="area_total" required />
    </div>
    <div class="form-row">
      <label for="dono_id">Proprietário da propriedade</label>
      <select id="dono_id" name="dono_id" required>
        <option value="">Selecione...</option>
        {% for d in donos %}
          <option value="{{ d['id'] }}">{{ d['nome'] }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="form-actions">
      <button type="submit" class="button">Salvar Propriedade</button>
      <button type="reset" class="button secondary">Limpar</button>
    </div>
  </form>
</section>

<section class="card">
  <h2>Propriedades cadastradas</h2>
  <table class="table">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Município/UF</th>
        <th>Área (ha)</th>
        <th>Proprietário</th>
      </tr>
    </thead>
    <tbody>
      {% for p in propriedades %}
        <tr>
          <td>{{ p['nome'] }}</td>
          <td>{{ p['municipio'] }}/{{ p['estado'] }}</td>
          <td>{{ '%.2f'|format(p['area_total_ha']) }}</td>
          <td>{{ p['dono_nome'] }}</td>
        </tr>
      {% else %}
        <tr><td colspan="4">Nenhuma propriedade cadastrada.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}